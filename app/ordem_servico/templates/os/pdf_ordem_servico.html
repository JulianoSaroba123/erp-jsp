<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Ordem de Serviço {{ ordem.numero }}</title>
    <style>
        @page {
            size: A4;
            margin: 10mm;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            font-size: 10px;
            line-height: 1.2;
            color: #000;
        }
        
        .container {
            width: 100%;
        }
        
        /* Cabeçalho com logo */
        .header {
            border: 3px solid #002755;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            margin-bottom: 15px;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .header-top {
            display: flex;
            align-items: flex-start;
            padding: 10px;
        }
        
        .logo-section {
            width: 80px;
            height: 80px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
        
        .logo-section img {
            max-width: 70px;
            max-height: 70px;
            object-fit: contain;
        }
        
        .company-info {
            flex: 1;
        }
        
        .company-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 3px;
            color: #000;
        }
        
        .company-details {
            font-size: 9px;
            line-height: 1.1;
            color: #333;
        }
        
        .os-info {
            position: absolute;
            top: 10px;
            right: 10px;
            text-align: right;
        }
        
        .os-number {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .os-date {
            font-size: 9px;
            color: #666;
        }
        
        .os-title {
            background: linear-gradient(135deg, #002755 0%, #1e3a8a 100%);
            color: white;
            border-top: 2px solid #002755;
            padding: 10px;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        /* Seções */
        .section {
            border: 2px solid #002755;
            margin-bottom: 10px;
            break-inside: avoid;
            page-break-inside: avoid;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .section-title {
            background: linear-gradient(135deg, #002755 0%, #1e3a8a 100%);
            color: white;
            border-bottom: 2px solid #002755;
            padding: 8px 12px;
            font-weight: bold;
            font-size: 10px;
            text-transform: uppercase;
        }
        
        .section-content {
            padding: 8px;
        }
        
        /* Grid de dados */
        .data-grid {
            width: 100%;
            margin-bottom: 8px;
        }
        
        .data-row {
            display: flex;
            margin-bottom: 6px;
        }
        
        .data-cell {
            flex: 1;
            padding: 5px;
            border: 1px solid #002755;
            margin-right: 3px;
            border-radius: 3px;
            background-color: #f8fafc;
        }
        
        .data-cell:last-child {
            margin-right: 0;
        }
        
        .data-cell-wide {
            flex: 3;
        }
        
        .data-cell-narrow {
            flex: 1;
        }
        
        .data-cell-full {
            flex: 1;
        }
        
        .data-label {
            font-weight: bold;
            font-size: 8px;
            text-transform: uppercase;
            color: #002755;
            margin-bottom: 2px;
            line-height: 1;
        }
        
        .data-value {
            font-size: 9px;
            line-height: 1.2;
        }
        
        /* Tabelas */
        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 5px 0;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .table th,
        .table td {
            border: 1px solid #002755;
            padding: 4px;
            text-align: left;
            font-size: 9px;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .table th {
            background: linear-gradient(135deg, #002755 0%, #1e3a8a 100%);
            color: white;
            font-weight: bold;
            text-align: center;
        }
        
        .table-item { width: 8%; }
        .table-desc { width: 50%; }
        .table-qty { width: 12%; }
        .table-unit { width: 15%; }
        .table-total { width: 15%; }
        
        .text-center {
            text-align: center;
        }
        
        .text-right {
            text-align: right;
        }
        
        .text-bold {
            font-weight: bold;
        }
        
        /* Área de texto */
        .text-area {
            min-height: 40px;
            padding: 5px;
            border: 1px solid #002755;
            background-color: #f8fafc;
            font-size: 9px;
            white-space: pre-wrap;
            line-height: 1.3;
            border-radius: 3px;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        /* Controles de quebra de página */
        .no-break {
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .header {
            break-after: avoid;
            page-break-after: avoid;
        }
        
        .section-title {
            break-after: avoid;
            page-break-after: avoid;
        }
        
        .data-grid {
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        /* Resumo financeiro */
        .financial-section {
            border: 2px solid #002755;
            margin-bottom: 10px;
            border-radius: 5px;
            overflow: hidden;
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .financial-title {
            background: linear-gradient(135deg, #002755 0%, #1e3a8a 100%);
            color: white;
            border-bottom: 2px solid #002755;
            padding: 8px 12px;
            font-weight: bold;
            font-size: 10px;
            text-transform: uppercase;
        }
        
        .financial-content {
            padding: 8px;
        }
        
        .financial-row {
            display: flex;
            justify-content: space-between;
            padding: 3px 0;
            border-bottom: 1px solid #eee;
            font-size: 9px;
        }
        
        .financial-row:last-child {
            border-bottom: none;
            border-top: 2px solid #002755;
            margin-top: 5px;
            padding-top: 5px;
            font-weight: bold;
            font-size: 10px;
            background-color: #f0f7ff;
        }
        
        /* Status */
        .status {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 8px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .status-aberta {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status-em_andamento {
            background-color: #cce5ff;
            color: #004085;
            border: 1px solid #99d3ff;
        }
        
        .status-concluida {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #a3d977;
        }
        
        .status-cancelada {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f1aeb5;
        }
        
        /* Assinaturas */
        .signatures {
            display: flex;
            gap: 30px;
            margin-top: 30px;
            page-break-inside: avoid;
        }
        
        .signature-box {
            flex: 1;
            text-align: center;
        }
        
        .signature-line {
            border-top: 2px solid #002755;
            margin-top: 50px;
            padding-top: 5px;
            font-size: 9px;
            font-weight: bold;
            color: #002755;
        }
        
        .signature-info {
            font-size: 8px;
            color: #666;
            margin-top: 3px;
        }
        
        /* Rodapé */
        .footer {
            margin-top: 15px;
            text-align: center;
            font-size: 8px;
            color: #666;
            border-top: 2px solid #002755;
            padding-top: 8px;
            background-color: #f8fafc;
        }
        
        /* Quebras de página */
        .page-break {
            page-break-before: always;
        }
        
        /* Logo placeholder */
        .logo-placeholder {
            background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
                        linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
                        linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
            background-size: 10px 10px;
            background-position: 0 0, 0 5px, 5px -5px, -5px 0px;
            font-size: 8px;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- CABEÇALHO -->
        <div class="header">
            <div class="header-top">
                <div class="logo-section">
                    {% if logo_base64 %}
                    <img src="{{ logo_base64 }}" alt="JSP Logo">
                    {% else %}
                    <div class="logo-placeholder">
                        JSP<br>LOGO
                    </div>
                    {% endif %}
                </div>
                <div class="company-info">
                    <div class="company-name">{{ config.nome_fantasia if config and config.nome_fantasia else 'JSP ELÉTRICA INDUSTRIAL & SOLAR' }}</div>
                    <div class="company-details">
                        {% if config and config.logradouro %}
                        {{ config.logradouro }}{% if config.numero %}, {{ config.numero }}{% endif %}{% if config.bairro %} - {{ config.bairro }}{% endif %}{% if config.cidade %} - {{ config.cidade }}{% endif %}{% if config.uf %}/{{ config.uf }}{% endif %}{% if config.cep %} - CEP: {{ config.cep }}{% endif %}<br>
                        {% else %}
                        Rua Indalécio Costa, 890 - Barra Funda - Tietê/SP - CEP: 18530-170<br>
                        {% endif %}
                        {% if config and config.telefone %}Telefone: {{ config.telefone }}{% else %}Telefone: (15) 99670-2036{% endif %}{% if config and config.email %} | Email: {{ config.email }}{% else %} | Email: atendimento@eletricasaroba.com.br{% endif %}<br>
                        CNPJ: {% if config and config.cnpj %}{{ config.cnpj }}{% else %}41.280.764/0001-65{% endif %}
                    </div>
                </div>
                <div class="os-info">
                    <div class="os-number">{{ ordem.numero }}</div>
                    <div class="os-date">{{ now().strftime('%d/%m/%Y') }}</div>
                </div>
            </div>
            <div class="os-title">ORDEM DE SERVIÇO</div>
        </div>

        <!-- DADOS DO CLIENTE -->
        <div class="section">
            <div class="section-title">Dados do Cliente</div>
            <div class="section-content">
                <div class="data-row">
                    <div class="data-cell data-cell-wide">
                        <div class="data-label">Nome/Razão Social</div>
                        <div class="data-value">{{ ordem.cliente.nome if ordem.cliente else 'Cliente não informado' }}</div>
                    </div>
                    <div class="data-cell data-cell-narrow">
                        <div class="data-label">Data Abertura</div>
                        <div class="data-value">{{ ordem.data_abertura.strftime('%d/%m/%Y') if ordem.data_abertura else 'N/A' }}</div>
                    </div>
                </div>
                <div class="data-row">
                    <div class="data-cell">
                        <div class="data-label">CPF/CNPJ</div>
                        <div class="data-value">{{ ordem.cliente.cpf_cnpj if ordem.cliente and ordem.cliente.cpf_cnpj else 'N/A' }}</div>
                    </div>
                    <div class="data-cell">
                        <div class="data-label">Telefone</div>
                        <div class="data-value">{{ ordem.cliente.telefone if ordem.cliente and ordem.cliente.telefone else 'N/A' }}</div>
                    </div>
                    <div class="data-cell">
                        <div class="data-label">Email</div>
                        <div class="data-value">{{ ordem.cliente.email if ordem.cliente and ordem.cliente.email else 'N/A' }}</div>
                    </div>
                </div>
                {% if ordem.cliente and ordem.cliente.endereco %}
                <div class="data-row">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Endereço</div>
                        <div class="data-value">{{ ordem.cliente.endereco }}</div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- DADOS DA SOLICITAÇÃO -->
        <div class="section">
            <div class="section-title">Dados da Solicitação</div>
            <div class="section-content">
                <div class="data-row">
                    <div class="data-cell">
                        <div class="data-label">Solicitante</div>
                        <div class="data-value">{{ ordem.solicitante if ordem.solicitante else 'N/A' }}</div>
                    </div>
                    <div class="data-cell">
                        <div class="data-label">Status</div>
                        <div class="data-value">
                            <span class="status status-{{ ordem.status }}">{{ ordem.status.upper() }}</span>
                        </div>
                    </div>
                    <div class="data-cell">
                        <div class="data-label">Prioridade</div>
                        <div class="data-value">{{ ordem.prioridade if ordem.prioridade else 'Normal' }}</div>
                    </div>
                </div>
                {% if ordem.equipamento or ordem.marca_modelo %}
                <div class="data-row">
                    {% if ordem.equipamento %}
                    <div class="data-cell">
                        <div class="data-label">Equipamento</div>
                        <div class="data-value">{{ ordem.equipamento }}</div>
                    </div>
                    {% endif %}
                    {% if ordem.marca_modelo %}
                    <div class="data-cell">
                        <div class="data-label">Marca/Modelo</div>
                        <div class="data-value">{{ ordem.marca_modelo }}</div>
                    </div>
                    {% endif %}
                    {% if ordem.numero_serie %}
                    <div class="data-cell">
                        <div class="data-label">Número de Série</div>
                        <div class="data-value">{{ ordem.numero_serie }}</div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
                <div class="data-row">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Defeito Relatado</div>
                        <div class="text-area">{{ ordem.defeito_relatado if ordem.defeito_relatado else 'Não informado' }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DESCRIÇÃO DOS SERVIÇOS REALIZADOS -->
        <div class="section">
            <div class="section-title">Descrição dos Serviços Realizados</div>
            <div class="section-content">
                <div class="data-row">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Descrição Geral do Serviço</div>
                        <div class="text-area">{{ ordem.descricao if ordem.descricao else 'Não informado' }}</div>
                    </div>
                </div>
                
                <div class="data-row">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Diagnóstico Técnico</div>
                        <div class="text-area">{{ ordem.diagnostico_tecnico if ordem.diagnostico_tecnico else 'Não informado' }}</div>
                    </div>
                </div>
                
                {% if ordem.solucao %}
                <div class="data-row">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Solução Aplicada</div>
                        <div class="text-area">{{ ordem.solucao }}</div>
                    </div>
                </div>
                {% endif %}
                
                {% if ordem.tecnico_responsavel %}
                <div class="data-row">
                    <div class="data-cell">
                        <div class="data-label">Técnico Responsável</div>
                        <div class="data-value">{{ ordem.tecnico_responsavel }}</div>
                    </div>
                    {% if ordem.data_inicio %}
                    <div class="data-cell">
                        <div class="data-label">Data de Início</div>
                        <div class="data-value">{{ ordem.data_inicio.strftime('%d/%m/%Y às %H:%M') if ordem.data_inicio else 'Não informado' }}</div>
                    </div>
                    {% endif %}
                    {% if ordem.data_conclusao %}
                    <div class="data-cell">
                        <div class="data-label">Data de Conclusão</div>
                        <div class="data-value">{{ ordem.data_conclusao.strftime('%d/%m/%Y às %H:%M') if ordem.data_conclusao else 'Não informado' }}</div>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
                
                {% if not ordem.descricao and not ordem.diagnostico and not ordem.solucao and not ordem.defeito_relatado %}
                <div class="data-row">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Serviços Realizados</div>
                        <div class="text-area" style="font-style: italic; color: #666;">Descrição dos serviços realizados não informada.</div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- SERVIÇOS EXECUTADOS -->
        {% if ordem.servicos %}
        <div class="section">
            <div class="section-title">Serviços Executados</div>
            <div class="section-content">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="table-item">Item</th>
                            <th class="table-desc">Descrição</th>
                            <th class="table-qty">Qtd</th>
                            <th class="table-unit">Valor Unit.</th>
                            <th class="table-total">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for servico in ordem.servicos %}
                        <tr>
                            <td class="text-center">{{ loop.index }}</td>
                            <td>{{ servico.descricao }}</td>
                            <td class="text-center">{{ "{:.2f}".format(servico.quantidade|float).replace('.', ',') }}</td>
                            <td class="text-right">R$ {{ "{:.2f}".format(servico.valor_unitario|float).replace('.', ',') }}</td>
                            <td class="text-right text-bold">R$ {{ "{:.2f}".format(servico.valor_total|float).replace('.', ',') }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% endif %}

        <!-- PRODUTOS UTILIZADOS -->
        {% if ordem.produtos %}
        <div class="section">
            <div class="section-title">Produtos Utilizados</div>
            <div class="section-content">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="table-item">Item</th>
                            <th class="table-desc">Descrição do Produto</th>
                            <th class="table-qty">Qtd</th>
                            <th class="table-unit">Valor Unit.</th>
                            <th class="table-total">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for produto in ordem.produtos %}
                        <tr>
                            <td class="text-center">{{ loop.index }}</td>
                            <td>{{ produto.descricao }}</td>
                            <td class="text-center">{{ "{:.3f}".format(produto.quantidade|float).replace('.', ',') }}</td>
                            <td class="text-right">R$ {{ "{:.2f}".format(produto.valor_unitario|float).replace('.', ',') }}</td>
                            <td class="text-right text-bold">R$ {{ "{:.2f}".format(produto.valor_total|float).replace('.', ',') }}</td>
                        </tr>
                        {% endfor %}
                        <!-- Linha de subtotal -->
                        <tr style="border-top: 2px solid #002755; background-color: #f8f9fa;">
                            <td colspan="4" class="text-right text-bold" style="padding: 8px;">
                                <strong>SUBTOTAL PRODUTOS:</strong>
                            </td>
                            <td class="text-right text-bold" style="padding: 8px; background-color: #e3f2fd; border: 1px solid #002755;">
                                <strong>R$ {{ "{:.2f}".format(ordem.valor_pecas|float if ordem.valor_pecas else 0).replace('.', ',') }}</strong>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <!-- Informações complementares dos produtos -->
                <div class="data-row" style="margin-top: 10px; font-size: 9px; color: #666;">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Observações sobre Produtos</div>
                        <div class="text-area">
                            • Todos os produtos utilizados são novos e possuem garantia do fabricante
                            • Produtos instalados conforme especificações técnicas e normas vigentes
                            • Garantia de instalação: {{ ordem.prazo_garantia if ordem.prazo_garantia else '90' }} dias
                            • Produtos não utilizados foram devolvidos ao estoque
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- CONDIÇÕES DE PAGAMENTO -->
        <div class="section">
            <div class="section-title">Condições de Pagamento</div>
            <div class="section-content">
                <div class="data-row">
                    <div class="data-cell">
                        <div class="data-label">Forma de Pagamento</div>
                        <div class="data-value">{{ ordem.condicao_pagamento if ordem.condicao_pagamento else 'À vista' }}</div>
                    </div>
                    {% if ordem.numero_parcelas %}
                    <div class="data-cell">
                        <div class="data-label">Parcelas</div>
                        <div class="data-value">{{ ordem.numero_parcelas }}x</div>
                    </div>
                    {% endif %}
                    {% if ordem.data_vencimento_pagamento %}
                    <div class="data-cell">
                        <div class="data-label">Vencimento</div>
                        <div class="data-value">{{ ordem.data_vencimento_pagamento.strftime('%d/%m/%Y') }}</div>
                    </div>
                    {% endif %}
                </div>
                {% if ordem.observacoes_pagamento %}
                <div class="data-row">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Observações de Pagamento</div>
                        <div class="text-area">{{ ordem.observacoes_pagamento }}</div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- DADOS BANCÁRIOS -->
        <div class="section">
            <div class="section-title">Dados Bancários - {{ config.nome_fantasia if config else 'JSP Elétrica' }}</div>
            <div class="section-content">
                <div class="data-row">
                    <div class="data-cell">
                        <div class="data-label">Banco</div>
                        <div class="data-value">{{ config.banco if config and config.banco else '403 – CORA SCFI' }}</div>
                    </div>
                    <div class="data-cell">
                        <div class="data-label">Agência</div>
                        <div class="data-value">{{ config.agencia if config and config.agencia else '0001' }}</div>
                    </div>
                    <div class="data-cell">
                        <div class="data-label">Conta Corrente</div>
                        <div class="data-value">{{ config.conta if config and config.conta else '4633457-0' }}</div>
                    </div>
                </div>
                <div class="data-row">
                    <div class="data-cell data-cell-wide">
                        <div class="data-label">PIX</div>
                        <div class="data-value">{{ config.pix if config and config.pix else '41.280.764/0001-65' }}</div>
                    </div>
                    <div class="data-cell data-cell-narrow">
                        <div class="data-label">Favorecido</div>
                        <div class="data-value">{{ config.razao_social if config and config.razao_social else 'JSP ELÉTRICA INDUSTRIAL & SOLAR LTDA' }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RESUMO FINANCEIRO -->
        <div class="financial-section">
            <div class="financial-title">Resumo Financeiro</div>
            <div class="financial-content">
                <div class="financial-row">
                    <span>Valor dos Serviços:</span>
                    <span>R$ {{ "{:.2f}".format(ordem.valor_servico|float if ordem.valor_servico else 0).replace('.', ',') }}</span>
                </div>
                <div class="financial-row">
                    <span>Valor das Peças:</span>
                    <span>R$ {{ "{:.2f}".format(ordem.valor_pecas|float if ordem.valor_pecas else 0).replace('.', ',') }}</span>
                </div>
                {% if ordem.valor_desconto and ordem.valor_desconto > 0 %}
                <div class="financial-row">
                    <span>Desconto:</span>
                    <span>- R$ {{ "{:.2f}".format(ordem.valor_desconto|float).replace('.', ',') }}</span>
                </div>
                {% endif %}
                <div class="financial-row">
                    <span>SUBTOTAL:</span>
                    <span>R$ {{ "{:.2f}".format((ordem.valor_total|float if ordem.valor_total else 0)).replace('.', ',') }}</span>
                </div>
                {% if ordem.valor_entrada and ordem.valor_entrada > 0 %}
                <div class="financial-row">
                    <span>Valor de Entrada (Pago):</span>
                    <span>- R$ {{ "{:.2f}".format(ordem.valor_entrada|float).replace('.', ',') }}</span>
                </div>
                <div class="financial-row">
                    <span>TOTAL A PAGAR:</span>
                    <span>R$ {{ "{:.2f}".format((ordem.valor_total|float if ordem.valor_total else 0) - (ordem.valor_entrada|float if ordem.valor_entrada else 0)).replace('.', ',') }}</span>
                </div>
                {% else %}
                <div class="financial-row">
                    <span>TOTAL A PAGAR:</span>
                    <span>R$ {{ "{:.2f}".format(ordem.valor_total|float if ordem.valor_total else 0).replace('.', ',') }}</span>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- GARANTIA DOS SERVIÇOS -->
        <div class="section">
            <div class="section-title">Garantia dos Serviços</div>
            <div class="section-content">
                <div class="data-row">
                    <div class="data-cell">
                        <div class="data-label">Prazo de Garantia</div>
                        <div class="data-value">
                            {% if ordem.prazo_garantia and ordem.prazo_garantia > 0 %}
                                {{ ordem.prazo_garantia }} dias
                            {% else %}
                                90 dias (padrão)
                            {% endif %}
                        </div>
                    </div>
                    {% if ordem.data_conclusao and ordem.prazo_garantia %}
                    <div class="data-cell">
                        <div class="data-label">Válida até</div>
                        <div class="data-value">
                            {% set prazo = ordem.prazo_garantia if ordem.prazo_garantia else 90 %}
                            {% set data_garantia = ordem.data_conclusao + timedelta(days=prazo) %}
                            {{ data_garantia.strftime('%d/%m/%Y') }}
                        </div>
                    </div>
                    {% endif %}
                    <div class="data-cell">
                        <div class="data-label">Cobertura</div>
                        <div class="data-value">Serviços executados e peças utilizadas</div>
                    </div>
                </div>
                
                <div class="data-row">
                    <div class="data-cell data-cell-full">
                        <div class="data-label">Condições da Garantia</div>
                        <div class="text-area" style="font-size: 9px;">
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OBSERVAÇÕES -->
        <div class="section">
            <div class="section-title">Observações</div>
            <div class="section-content">
                <div class="text-area">
                    {{ ordem.observacoes if ordem.observacoes else 'Nenhuma observação adicional.' }}
                </div>
            </div>
        </div>

        <!-- TERMOS E CONDIÇÕES -->
        <div class="section">
            <div class="section-title">Termos e Condições</div>
            <div class="section-content">
                <div class="text-area" style="font-size: 8px; line-height: 1.2;">

                </div>
            </div>
        </div>

        <!-- ASSINATURAS -->
        <div class="signatures">
            <div class="signature-box">
                <div class="signature-line">
                    TÉCNICO RESPONSÁVEL
                </div>
                <div class="signature-info">
                    {{ ordem.tecnico_responsavel if ordem.tecnico_responsavel else 'Nome do Técnico' }}<br>
                    Data: ___/___/______
                </div>
            </div>
            <div class="signature-box">
                <div class="signature-line">
                    CLIENTE
                </div>
                <div class="signature-info">
                    {{ ordem.cliente.nome if ordem.cliente else 'Nome do Cliente' }}<br>
                    Data: ___/___/______
                </div>
            </div>
        </div>

        <!-- RODAPÉ -->
        <div class="footer">
            <p>Documento gerado automaticamente pelo sistema {{ config.nome_fantasia if config and config.nome_fantasia else 'JSP' }} ERP em {{ now().strftime('%d/%m/%Y às %H:%M') }}</p>
            <p>Ordem de Serviço válida somente com assinatura e carimbo da empresa</p>
        </div>
    </div>
</body>
</html>