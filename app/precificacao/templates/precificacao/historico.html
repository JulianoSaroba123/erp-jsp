{% extends "base.html" %}

{% block content %}
<div class="container-fluid mt-4">
  <h2 class="text-center mb-4 text-cyan fw-bold"><i class="fas fa-history me-2"></i>Histórico de Precificações</h2>
  <div class="table-responsive">
    <table class="table table-dark table-hover align-middle">
      <thead class="text-cyan">
        <tr>
          <th>Data</th>
          <th>Custos Fixos</th>
          <th>Custos Variáveis</th>
          <th>Horas/Mês</th>
          <th>Margem (%)</th>
          <th>Preço Hora</th>
          <th>Preço Dia</th>
        </tr>
      </thead>
      <tbody>
        {% for conf in configs %}
        {% set precos = conf.calcular_precos() %}
        <tr>
          <td>{{ conf.created_at.strftime('%d/%m/%Y %H:%M') }}</td>
          <td>R$ {{ '%.2f' % conf.custo_fixos }}</td>
          <td>R$ {{ '%.2f' % conf.custo_variaveis }}</td>
          <td>{{ conf.horas_mes }}</td>
          <td>{{ '%.2f' % conf.margem }} %</td>
          <td>R$ {{ '%.2f' % precos.preco_hora }}</td>
          <td>R$ {{ '%.2f' % precos.preco_dia }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="text-center mt-3">
    <a href="{{ url_for('precificacao.calculadora') }}" class="btn btn-cyan"><i class="fas fa-arrow-left me-2"></i>Voltar para Precificação</a>
  </div>
</div>
{% endblock %}

{% block styles %}
{{ super() }}
<style>
  .text-cyan {
    color: #00ffff;
  }
  .btn-cyan {
    background-color: #00ffff;
    color: #0d1326;
    font-weight: bold;
    border-radius: 8px;
    padding: 10px 20px;
  }
  .btn-cyan:hover {
    background-color: #00e5ff;
    color: #0d1326;
  }
</style>
{% endblock %}